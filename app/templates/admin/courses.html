{% extends "base.html" %}

{% block title %}Manage Courses{% endblock %}

{% block content %}
<div class="container">
    <div class="header-container">
        <h1 class="page-title">Course Management</h1>
        <a href="{{ url_for('admin.dashboard') }}" class="btn btn-back-dashboard">Back to Dashboard</a>
        <button id="toggleFormBtn" class="btn btn-success">
            <i class="fas fa-plus"></i> Add New Course
        </button>
    </div>
    
    <div id="addCourseSection" class="add-course-section" style="display: none;">
        <h2 class="section-title">New Course</h2>
        <form method="POST" action="{{ url_for('admin.courses') }}">
            <div class="form-row">
                <div class="form-group">
                    <label for="code">Course Code</label>
                    <input type="text" id="code" name="code" required>
                </div>
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" id="title" name="title" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="schedule">Schedule</label>
                    <input type="text" id="schedule" name="schedule" required>
                </div>
                <div class="form-group">
                    <label for="capacity">Capacity</label>
                    <input type="number" id="capacity" name="capacity" required>
                </div>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="5" required></textarea>
            </div>
            <div class="form-group">
                <label for="prerequisites">Prerequisites (comma separated)</label>
                <input type="text" id="prerequisites" name="prerequisites">
            </div>
            <div class="form-group">
                <label for="price">Price ($)</label>
                <input type="number" id="price" name="price" 
                      value="{{ course.price if course else '100.00' }}" 
                      min="0" step="0.01" required>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-success">Save Course</button>
                <button type="button" id="cancelFormBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </form>
    </div>
    
    <div class="existing-courses-section">
        <h2 class="section-title">Existing Courses</h2>
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Code</th>
                    <th>Title</th>
                    <th>Schedule</th>
                    <th>Capacity</th>
                    <th>Price</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for course in courses %}
                <tr>
                    <td>{{ course.code }}</td>
                    <td>{{ course.title }}</td>
                    <td>{{ course.schedule }}</td>
                    <td>{{ course.capacity }}</td>
                    <td>${{ "%.2f"|format(course.price) }}</td>
                    <td class="actions-cell">
                        <a href="{{ url_for('admin.edit_course', course_id=course.id) }}" 
                           class="btn btn-sm btn-warning">
                            <i class="fas fa-edit"></i> Edit
                        </a>
                        <form action="{{ url_for('admin.delete_course', course_id=course.id) }}" 
                              method="POST" class="inline-form">
                            <button type="submit" class="btn btn-sm btn-danger" 
                                    onclick="return confirm('Delete this course?')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}